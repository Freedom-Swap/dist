{"version":3,"sources":["webpack:///./src/assets/images/userBanner_en.png","webpack:///./src/assets/images/userBanner.png","webpack:///./src/views/user/index.vue?ead5","webpack:///./src/views/user/index.vue","webpack:///./src/views/user/index.vue?e3ea"],"names":["module","exports","class","src","_imports_0","alt","_imports_1","_createElementVNode","_imports_2","_createElementBlock","_createVNode","_component_HeadTop","title","_ctx","isShowTop","isSubHeader","_toDisplayString","_hoisted_9","_hoisted_12","onClick","_Fragment","_renderList","item","index","key","_hoisted_21","components","HeadTop","setup","store","useStore","useI18n","t","data","reactive","address","computed","state","accounts","web3","provider","locale","freeDomContract","usdtContract","nftContract","freeDomBalance","usdtBalance","reward","list","nftNum","initContract","eth","Contract","tokenAbi","config","usdtAddress","freeDomAddress","nftAbi","nftAddress","initData","getBalance","getRewardAmount","getNft","methods","balanceOf","call","BigNumber","dividedBy","toFixed","getUserAllTokens","ids","length","earned","withdrawReward","getReward","send","from","Toast","watch","val","refData","toRefs","__exports__","render"],"mappings":"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","file":"static/js/chunk-9523f96c.0d9dd6fd.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/userBanner_en.82538735.png\";","module.exports = __webpack_public_path__ + \"static/img/userBanner.3ce66322.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=13ef1dc4&lang=less&scoped=true\"","<template>\n  <div class=\"user-box\">\n    <HeadTop :title=\"$t('index.我的资产')\" :isShowTop=\"true\" :isSubHeader=\"false\"></HeadTop>\n    <div class=\"top-banner\">\n      <img v-if=\"locale == 'en'\" src=\"@/assets/images/userBanner_en.png\" alt=\"\">\n      <img v-else src=\"@/assets/images/userBanner.png\" alt=\"\">\n    </div>\n    <div class=\"user-item\">\n      <div class=\"title\"> {{$t('index.我的代币资产')}}</div>\n      <div class=\"token-box flex-between\">\n        <div class=\"token-item\">\n        <div class=\"name\">USDT</div>\n        <div class=\"num\">{{usdtBalance}}</div>\n      </div>\n      <div class=\"token-item\">\n        <div class=\"name\">FreeDom</div>\n        <div class=\"num\">{{freeDomBalance}}</div>\n      </div>\n      </div>\n    </div>\n\n     <div class=\"user-item\">\n      <div class=\"title\"> {{$t('index.自由联盟勋章')}}({{nftNum}})</div>\n      <div class=\"mynft-box\">\n        <div class=\"mynft-item flex-middle\">\n          <div class=\"desc-box flex-item\">\n            <div class=\"name\"> {{$t('index.待领取收益')}}</div>\n            <div class=\"num\"> {{$t('index.收益:')}} {{reward}}FreeDom</div>\n          </div>\n          <div class=\"get-btn\" @click=\"withdrawReward\"> {{$t('index.领取')}}</div>\n      </div>\n      <div class=\"mynft-item flex-middle\" v-for=\"(item, index) in list\" :key=\"index\">\n         <img src=\"@/assets/images/logo.png\" alt=\"\">\n          <div class=\"desc-box flex-item\">\n            <div class=\"name\">FreeDom #{{item}}</div>\n          </div>\n      </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport HeadTop from '@/components/HeadTop'\nimport { reactive, toRefs, computed, watch } from \"vue\";\nimport { useStore } from \"vuex\";\nimport config from \"@/utils/config\";\nimport tokenAbi from \"@/utils/abi\";\nimport nftAbi from \"@/utils/nftAbi\";\nimport { useI18n } from \"vue-i18n\"\n\nimport BigNumber from 'bignumber.js';\nimport { Toast } from 'vant';\n\n\nexport default {\n  components: {\n    HeadTop\n  },\n  setup () {\n    const store = useStore()\n    const { t } = useI18n()\n    const data = reactive({\n      address: computed(() => store.state.accounts[0]),\n      web3: computed(() => store.state.provider),\n      locale: computed(() => store.state.locale),\n      freeDomContract: null,\n      usdtContract: null,\n      nftContract: null,\n      freeDomBalance: '0.00',\n      usdtBalance: '0.00',\n      reward: '0.00',\n      list: [],\n      nftNum: 0,\n      initContract: () => {\n        data.usdtContract = new data.web3.eth.Contract(tokenAbi, config.usdtAddress)\n        data.freeDomContract = new data.web3.eth.Contract(tokenAbi, config.freeDomAddress)\n        data.nftContract = new data.web3.eth.Contract(nftAbi, config.nftAddress)\n        data.initData()\n      },\n      initData: () => {\n        data.getBalance()\n        data.getRewardAmount()\n        data.getNft()\n      },\n       getBalance: async () => {\n        let freeDomBalance = await data.freeDomContract.methods.balanceOf(data.address).call()\n        let usdtBalance = await data.usdtContract.methods.balanceOf(data.address).call()\n        data.usdtBalance =  new BigNumber(usdtBalance).dividedBy(10 ** 18).toFixed(2,1)\n        data.freeDomBalance =  new BigNumber(freeDomBalance).dividedBy(10 ** 18).toFixed(2,1)\n      },\n      getNft: async () => {\n        let ids = await data.nftContract.methods.getUserAllTokens(data.address).call()\n        data.nftNum = ids.length\n        data.list = ids\n        console.log(ids)\n      },\n      getRewardAmount: async () => {\n        let reward = await data.nftContract.methods.earned(data.address).call()\n        data.reward = new BigNumber(reward).dividedBy(10 ** 18).toFixed(3)\n      },\n      withdrawReward: async () => {\n         try {\n          await data.nftContract.methods.getReward().send({from: data.address})\n          Toast(t('index.领取成功'))\n           data.initData()\n        } catch (error) {\n          Toast(t('index.领取失败'))\n        }\n      }\n    })\n    if (data.address) {\n      data.initContract()\n    }\n    watch(() => data.address, (val) => {\n      if (val) {\n        data.initContract()\n      }\n    })\n    const refData = toRefs(data);\n    return {\n      ...refData\n    };\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.user-box{\n  padding: 20px 16px 15px;\n  .top-banner{\n    // padding: 16px;\n    // background: url('~@/assets/images/item_bg.png') no-repeat;\n    // background-size: cover;\n    img{\n      display: block;\n      width: 100%;\n    }\n    border-radius: 4px;\n    margin-bottom: 30px;\n    .title{\n      font-size: 23px;\n      color: #fff;\n      font-weight: 600;\n      margin-bottom: 5px;\n    }\n    .desc{\n      font-size: 14px;\n      color: rgba(255, 255, 255, 0.55);\n      margin-bottom: 15px;\n    }\n    .span-btn{\n      height: 22px;\n      line-height: 22px;\n      font-size: 10px;\n      background: linear-gradient(0deg, rgba(255, 255, 255, 0.8) 0%, #FFFFFF 100%);\n      color: #F03C85;\n      padding: 0 10px;\n      border-radius: 12px;\n      display: inline-block;\n    }\n  }\n  .user-item{\n    margin-bottom: 24px;\n    .title{\n      font-size: 16px;\n      color: #fff;\n      font-weight: 600;\n      margin-bottom: 14px;\n      position: relative;\n      padding-left: 10px;\n      &::after{\n        content: '';\n        width: 3px;\n        position: absolute;\n        height: 100%;\n        left: 0;\n        background: #66d304;\n      }\n    }\n    .token-box{\n      flex-wrap: wrap;\n    }\n    .token-item{\n      padding: 20px;\n      color: #fff;\n      margin: 5px 0;\n      border-radius: 6px;\n      width: 49%;\n      .name{\n        font-size: 16px;\n        font-weight: 600;\n      }\n      .num{\n        font-weight: 600;\n        font-size: 22px;\n      }\n      &:nth-child(1) {\n        background: url('~@/assets/images/item_1.png') no-repeat;\n        background-size: cover;\n        .name{\n          color: #FFE3C8;\n        }\n      }\n      &:nth-child(2) {\n        background: url('~@/assets/images/item_2.png') no-repeat;\n        background-size: cover;\n        .name{\n          color: #C3E3FE;\n        }\n      }\n      &:nth-child(3) {\n        background: url('~@/assets/images/item_2.png') no-repeat;\n        background-size: cover;\n        .name{\n          color: #C3E3FE;\n        }\n      }\n    }\n    .nft-box{\n      background: linear-gradient(-90deg, #3C3863 0%, #4A3B76 100%);\n      border-radius: 4px;\n      padding: 0 20px;\n      flex-wrap: wrap;\n      .nft-item{\n        width: 50%;\n         padding:20px 15px;\n        .name{\n          color: #9D8BD0;\n          font-size: 14px;\n          margin-bottom: 10px;\n        }\n        .num{\n           color: #fff;\n          font-size: 18px;\n          font-weight: 600;\n        }\n      }\n    }\n    .mynft-box{\n      .mynft-item{\n        background: rgba(255, 255, 255, 0.15);\n        padding: 15px;\n        border-radius: 4px;\n        margin-bottom: 10px;\n        img{\n          width: 60px;\n          height: 60px;\n          margin-right: 12px;\n          display: block;\n        }\n        .desc-box{\n          .name{\n            font-size: 15px;\n            color: #fff;\n            font-weight: 600;\n            margin-bottom: 5px;\n          }\n          .num{\n            font-size: 14px;\n            color: #a3ed3e;\n          }\n        }\n        .get-btn{\n          background: #66d304;\n          height: 30px;\n          border-radius: 15px;\n          padding: 0 15px;\n          color: #fff;\n          line-height: 30px;\n          font-size: 13px;\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./index.vue?vue&type=template&id=13ef1dc4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=13ef1dc4&lang=less&scoped=true\"\n\nimport exportComponent from \"/Users/wangyouquan/priviteProject/freeDom/freeDomVUe/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-13ef1dc4\"]])\n\nexport default __exports__"],"sourceRoot":""}